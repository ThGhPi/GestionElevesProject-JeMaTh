# GestionElevesProject-JeMaTh

Full-stack application for managing students, built with:

-   React + TailwindCSS (frontend, running on Vite port 5173)
-   Spring Boot (backend, on port 8081)
-   PostgreSQL (database)
-   Docker Compose for backend + database orchestration
-   Optional standalone Spring Boot JAR: `api-0.0.5-Fonctionnel.jar`

------------------------------------------------------------------------

### ğŸ“ Project Structure

```graphql
    GestionElevesProject-JeMaTh/
     â”œâ”€â”€ frontnote/                 # React + Tailwind application
     |    â”œâ”€â”€ Dockerfile
     â”‚    â””â”€â”€ ...
     â”œâ”€â”€ api/                       # Spring Boot API + Docker
     â”‚    â”œâ”€â”€ src/
     â”‚    â”œâ”€â”€ Dockerfile
     â”‚    â”œâ”€â”€ docker-compose.yml    # Not really standard but works
     â”‚    â””â”€â”€ ...
     â”œâ”€â”€ api-0.0.5-Fonctionnel.jar   # Optional standalone JAR
     â”œâ”€â”€ GITBRANCH.md                # memo for organisationnal purpose
     â”œâ”€â”€ Jenkinsfile                 # Honestly just trying something
     â””â”€â”€ README.md
```
------------------------------------------------------------------------

## ğŸš€ Frontend (React + Tailwind)

The frontend is not containerized and runs with Vite's dev server.

1.  Install dependencies

```bash
cd frontend
npm install
```

2.  Start development server (default: 5173)

```bash
npm run dev
```

Your frontend is now available at:

ğŸ‘‰ http://localhost:5173

------------------------------------------------------------------------

## ğŸ–¥ï¸ Backend (Spring Boot API)

The backend API uses PostgreSQL and exposes endpoints on:

ğŸ‘‰ http://localhost:8081

You can run the API in Docker or as a standalone JAR.

------------------------------------------------------------------------

## ğŸ³ Backend With Docker Compose

The backend's docker-compose.yml (located in /backend) starts:

-   the Spring Boot API
-   PostgreSQL
-   a database volume

1.  Build & start containers
```bash
cd api
docker compose up --build
```

2.  Start without rebuilding

```bash
docker compose up
```

3.  Stop containers

```bash
docker compose down
```

------------------------------------------------------------------------

## ğŸ³ Backend Dockerfile

Located at:
```
api/Dockerfile
```

Uses multi-stage build to:

-   build the JAR with Maven
-   run it as app.jar

You do not need to build the jar manually when using Docker Compose.

------------------------------------------------------------------------

## ğŸ”§ Run Backend Without Docker (Standalone JAR)

You have an additional pre-built executable JAR : `api-0.0.5-Fonctionnel.jar`

Run it from the project root :
```bash
java -jar api-0.0.5-Fonctionnel.jar
```

Make sure PostgreSQL is running separately.

------------------------------------------------------------------------

## ğŸ—„ï¸ PostgreSQL

When using Docker Compose, PostgreSQL runs automatically.

To connect manually :
```yaml
host: localhost
port: 5432
user: postgres
password: postgres
database: studentgestion
```
------------------------------------------------------------------------

## ğŸ”„ Frontend â†’ Backend Communication

Your frontend (http://localhost:5173) communicates with the backend
(http://localhost:8081).

The backend must allow CORS with credentials : (that is the case for the jar generated by docer-ompose)

-   Allowed Origin: `http://localhost:5173`
-   Allow-Credentials: `true`
-   Allow-Headers: `content-type`
-   Expose Headers: `Set-Cookie`

Typical React request in our case :

    fetch("http://localhost:8081/api/auth/login", {
      method: "POST",
      credentials: "include",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    });

------------------------------------------------------------------------

## ğŸ“¦ Build Production Frontend (Optional)

If you later want to dockerize the frontend:

    cd frontend
    npm run build

The build output will appear in:

    frontend/dist/

------------------------------------------------------------------------

## ğŸ§ª Testing the Backend

Using Postman :

-   Send a POST request to http://localhost:8081/api/auth/login
-   Body â†’ JSON
-   If cookies are enabled, you should see Set-Cookie in response
    headers.

------------------------------------------------------------------------
## Jenkins Configuration Guide (Post-Container Setup)

This guide explains **how to configure Jenkins** once your Jenkins
container is built and running.\
You can include this section in your project's main `README.md`.

------------------------------------------------------------------------

### âœ… 1. Access Jenkins

Once your Jenkins container is running, open:

    http://localhost:8084

Retrieve the initial admin password from the container:

``` bash
docker exec -it jenkins cat /var/jenkins_home/secrets/initialAdminPassword
```

Paste the password into the setup page and create your admin user.

------------------------------------------------------------------------

### âœ… 2. Install Required Plugins

When prompted, choose:

#### **Install Suggested Plugins**

After installation, verify these are present:

-   **Git plugin**
-   **Pipeline**
-   **Docker Pipeline**
-   **Credentials Binding**
-   **Blue Ocean** (optional but recommended)

------------------------------------------------------------------------

### âœ… 3. Configure Global Tools

Go to:

**Manage Jenkins â†’ Tools**

Set:

#### **JDK / Java**

If using Java builds, install automatically.

#### **Git**

Normally auto-detected.

#### **Docker**

No configuration required unless using remote Docker hosts.

------------------------------------------------------------------------

### âœ… 4. Add Credentials

Go to:

**Manage Jenkins â†’ Credentials â†’ System â†’ Global credentials**

Add:

#### 1. Git credentials

To allow Jenkins to pull your repo.

#### 2. (Optional) Docker Hub credentials

Required only if pushing images.

#### 3. (Optional) SSH key for remote deployment

If deploying to a VPS.

------------------------------------------------------------------------

### âœ… 5. Create a Pipeline Job

1.  From Jenkins dashboard:\
    **New Item â†’ Pipeline**
2.  Name it:\
    `GestionEleves-CI-CD`
3.  Select **Pipeline**
4.  Under **Pipeline Definition**, choose:\
    **Pipeline script from SCM**
5.  Select your repo provider (Git)

Configure:

-   Repository URL\

-   Credentials\

-   Branch (usually `main` or `master`)

-   Script Path:

        Jenkinsfile

This tells Jenkins to automatically use the `Jenkinsfile` in your repo.

------------------------------------------------------------------------

### âœ… 6. First Build

Click:

**Build Now**

Watch progress in:

-   Blue Ocean\
    or\
-   Console Output

If the pipeline runs successfully, Jenkins is correctly configured.

------------------------------------------------------------------------

### ğŸ”„ 7. Automatic Builds (Optional)

To trigger pipelines automatically when you push:

#### For GitHub:

1.  Go to your repository â†’ **Settings â†’ Webhooks**

2.  Add webhook:

        http://localhost:8080/github-webhook/

3.  Select **Just the push event**

------------------------------------------------------------------------

### ğŸ›  8. Verify Jenkins Has Access to Docker

Run:

``` bash
docker exec -it jenkins docker ps
```

If containers appear, Jenkins is correctly linked to the Docker socket.

If you get a permissions error, ensure your Docker-compose includes:

``` yaml
user: root
volumes:
  - /var/run/docker.sock:/var/run/docker.sock
```

------------------------------------------------------------------------

### ğŸ“Œ Conclusion

Your Jenkins environment is now configured to:

-   Pull code from your repo\
-   Read and execute your Jenkinsfile\
-   Build your frontend and backend via Docker\
-   Run CI/CD pipelines automatically

You can now add or extend pipeline stages based on your project's needs.

------------------------------------------------------------------------

## ğŸ“ Notes & Tips

-   The React app is not containerized, so run it manually with Vite.
-   The backend can be run either with Docker Compose or with the
    standalone JAR.
-   PostgreSQL is automatically handled by Docker.
-   CORS must always include the frontend origin (:5173) and allow
    credentials.
